<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="movenet">
<title>Enhancing the privacy of livestock movement and holding data • movenet</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Enhancing the privacy of livestock movement and holding data">
<meta property="og:description" content="movenet">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">movenet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0-1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/movenet.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/configurations.html">Configurations</a>
    <a class="dropdown-item" href="../articles/pseudonymise.html">Enhancing the privacy of livestock movement and holding data</a>
    <a class="dropdown-item" href="../articles/network-analysis.html">Network analysis of livestock movement data</a>
    <a class="dropdown-item" href="../articles/trace-contact-chains.html">Analysing and visualising contact chains on a Leaflet map</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Enhancing the privacy of livestock movement and holding data</h1>
            
      
      
      <div class="d-none name"><code>pseudonymise.Rmd</code></div>
    </div>

    
    
<p>To help address concerns around commercial sensitivity, movenet
includes a range of functions to make livestock movement data and/or
holding data non-identifiable. This vignette shows you how to use
these.</p>
<div class="section level2">
<h2 id="setting-up">Setting up<a class="anchor" aria-label="anchor" href="#setting-up"></a>
</h2>
<p>To get started, first load the movenet package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://digivet-consortium.github.io/movenet/">movenet</a></span><span class="op">)</span></span></code></pre></div>
<p>The example datasets that we will use in this vignette are
<code>example_movement_data</code> and
<code>example_holding_data</code>, provided with the package. These are
tibbles in movenet format, containing movement and holding data,
respectively. Inspect these datasets to get a feel for them.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inspect the first lines of the example movenet-format movement and holding tibbles:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_movement_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph    departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 95/216/1100   19/818/9098 2019-02-08           97             <span style="text-decoration: underline;">304</span>781</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 69/196/5890   71/939/3228 2019-08-15          167             <span style="text-decoration: underline;">229</span>759</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 52/577/5349   82/501/8178 2019-09-15          115              <span style="text-decoration: underline;">36</span>413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 39/103/5541   13/282/1763 2019-10-26          125             <span style="text-decoration: underline;">488</span>616</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 41/788/6464   57/418/6011 2019-10-17          109             <span style="text-decoration: underline;">581</span>785</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 69/393/9398   39/947/2201 2019-10-06           72             <span style="text-decoration: underline;">564</span>911</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_holding_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 4</span></span></span>
<span><span class="co">#&gt;   cph         holding_type herd_size           coordinates</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;POINT [°]&gt;</span></span>m</span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 68/575/1991 GXFSR             <span style="text-decoration: underline;">2</span>111   (3.718568 52.69096)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 51/469/9863 SCHZQ             <span style="text-decoration: underline;">2</span>134  (-4.959035 51.88195)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 32/532/8560 HEJDE             <span style="text-decoration: underline;">2</span>140   (5.709143 51.97547)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 82/501/8178 IQALL             <span style="text-decoration: underline;">2</span>141  (-2.983365 57.55851)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 29/675/4499 YUFUC             <span style="text-decoration: underline;">2</span>148   (5.586477 50.50902)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 59/516/9442 IATKP             <span style="text-decoration: underline;">2</span>151 (-0.3323066 58.84295)</span></span></code></pre></div>
<p>Then, load a configuration file that can be used with these example
datasets. This configuration file tells movenet which columns contain
which data types, so that the correct columns get modified when using
the privacy-enhancing functions. For more details on configuration files
see <code><a href="../articles/movenet.html">vignette("movenet")</a></code> and
<code><a href="../articles/configurations.html">vignette("configurations")</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load a combined movement and holding config file:</span></span>
<span><span class="fu"><a href="../reference/load_config.html">load_config</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"configurations"</span>, <span class="st">"fakeScotEID_combined_config.yml"</span>, package<span class="op">=</span><span class="st">"movenet"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Successfully loaded config file: C:/Users/cboga/AppData/Local/Temp/Rtmpgljbtd/temp_libpath6c5c432e6c53/movenet/configurations/fakeScotEID_combined_config.yml</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="pseudonymising-holding-identifiers">Pseudonymising holding identifiers<a class="anchor" aria-label="anchor" href="#pseudonymising-holding-identifiers"></a>
</h2>
<p>The function <code><a href="../reference/anonymise.html">anonymise()</a></code> pseudonymises holding
identifiers in movenet-format movement or holding data tibbles, by
replacing these identifiers with a number and an optional prefix
(e.g. “FARM”).</p>
<p>It returns a pseudonymised data tibble and the applied
pseudonymisation key. This key can optionally be saved to recover the
original identifiers at a later date, or for application to an
overlapping dataset.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pseudonymise movement_data by changing identifiers to FARM1-N:</span></span>
<span><span class="va">pseudonymised</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anonymise.html">anonymise</a></span><span class="op">(</span><span class="va">example_movement_data</span>, prefix <span class="op">=</span> <span class="st">"FARM"</span><span class="op">)</span></span>
<span><span class="va">pseudonymised_movement_data</span> <span class="op">&lt;-</span> <span class="va">pseudonymised</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="va">pseudonymisation_key</span> <span class="op">&lt;-</span> <span class="va">pseudonymised</span><span class="op">$</span><span class="va">key</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pseudonymised_movement_data</span><span class="op">)</span> <span class="co"># Inspect pseudonymised movement data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FARM163       FARM162  2019-02-08           97             <span style="text-decoration: underline;">304</span>781</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FARM243       FARM212  2019-08-15          167             <span style="text-decoration: underline;">229</span>759</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FARM258       FARM390  2019-09-15          115              <span style="text-decoration: underline;">36</span>413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> FARM121       FARM57   2019-10-26          125             <span style="text-decoration: underline;">488</span>616</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> FARM467       FARM120  2019-10-17          109             <span style="text-decoration: underline;">581</span>785</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> FARM117       FARM300  2019-10-06           72             <span style="text-decoration: underline;">564</span>911</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pseudonymisation_key</span><span class="op">)</span> <span class="co"># Inspect pseudonymisation key</span></span>
<span><span class="co">#&gt; 90/829/4001 54/868/1322 86/302/7610 47/479/9810 45/564/2870 28/452/4214 </span></span>
<span><span class="co">#&gt;     "FARM1"     "FARM2"     "FARM3"     "FARM4"     "FARM5"     "FARM6"</span></span></code></pre></div>
<p><code><a href="../reference/anonymise.html">anonymise()</a></code> also takes an optional <code>key</code>
argument, with which you can apply an existing pseudonymisation key to
the data tibble:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use the same key from above to substitute holding identifiers in holding_data:</span></span>
<span><span class="va">pseudonymised_holding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anonymise.html">anonymise</a></span><span class="op">(</span><span class="va">example_holding_data</span>, key <span class="op">=</span> <span class="va">pseudonymisation_key</span><span class="op">)</span> </span>
<span><span class="va">pseudonymised_holding_data</span> <span class="op">&lt;-</span> <span class="va">pseudonymised_holding</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="co"># Update saved key, in case additional identifiers were added from the holding datafile:</span></span>
<span><span class="va">pseudonymisation_key</span> <span class="op">&lt;-</span> <span class="va">pseudonymised_holding</span><span class="op">$</span><span class="va">key</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pseudonymised_holding_data</span><span class="op">)</span> <span class="co"># Inspect pseudonymised holding data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 4</span></span></span>
<span><span class="co">#&gt;   cph     holding_type herd_size           coordinates</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;POINT [°]&gt;</span></span>m</span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FARM289 GXFSR             <span style="text-decoration: underline;">2</span>111   (3.718568 52.69096)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FARM45  SCHZQ             <span style="text-decoration: underline;">2</span>134  (-4.959035 51.88195)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> FARM466 HEJDE             <span style="text-decoration: underline;">2</span>140   (5.709143 51.97547)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> FARM390 IQALL             <span style="text-decoration: underline;">2</span>141  (-2.983365 57.55851)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> FARM377 YUFUC             <span style="text-decoration: underline;">2</span>148   (5.586477 50.50902)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> FARM144 IATKP             <span style="text-decoration: underline;">2</span>151 (-0.3323066 58.84295)</span></span></code></pre></div>
<p>This allows multiple datasets to be pseudonymised in a consistent
way, so that it is possible to subsequently merge the datasets by
pseudonymised identifier.</p>
</div>
<div class="section level2">
<h2 id="modifying-dates-weights-and-optional-numeric-data-columns">Modifying dates, weights, and optional numeric data columns<a class="anchor" aria-label="anchor" href="#modifying-dates-weights-and-optional-numeric-data-columns"></a>
</h2>
<p>movenet also has functions to modify movement dates or weights by
applying a small amount of noise (jittering) or by rounding:</p>
<ul>
<li><p><code>jitter_dates(data, range)</code> adds random noise of up to
<code>range</code> days to movement dates.</p></li>
<li><p><code>jitter_weights(data, range, column)</code> adds random
noise of up to <code>range</code> to a numeric <code>column</code> in
the movement data, by default the “weight” column.</p></li>
<li><p><code>round_dates(data, unit, week_start, sum_weight, ...)</code>
rounds movement dates down to the first day of the specified time
<code>unit</code>. For rounding down to weeks, set the starting day of
the week with <code>week_start</code>. By default, weights are
aggregated for all movements between the same holdings over the
indicated time unit (<code>sum_weight = TRUE</code>); to keep movements
separate, set <code>sum_weight = FALSE</code>. Alternative or additional
summary functions can be applied through <code>...</code>, using tidy
evaluation rules.</p></li>
<li><p><code>round_weights(data, unit, column)</code> rounds data in a
numeric <code>column</code>, by default the “weight” column, to
multiples of <code>unit</code>.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add jitter of up to ±5 days to movement dates:</span>:</span>
<span><span class="va">movedata_datesj5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/jitter_dates.html">jitter_dates</a></span><span class="op">(</span><span class="va">example_movement_data</span>, range <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_movement_data</span><span class="op">)</span> <span class="co"># Inspect original</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph    departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 95/216/1100   19/818/9098 2019-02-08           97             <span style="text-decoration: underline;">304</span>781</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 69/196/5890   71/939/3228 2019-08-15          167             <span style="text-decoration: underline;">229</span>759</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 52/577/5349   82/501/8178 2019-09-15          115              <span style="text-decoration: underline;">36</span>413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 39/103/5541   13/282/1763 2019-10-26          125             <span style="text-decoration: underline;">488</span>616</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 41/788/6464   57/418/6011 2019-10-17          109             <span style="text-decoration: underline;">581</span>785</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 69/393/9398   39/947/2201 2019-10-06           72             <span style="text-decoration: underline;">564</span>911</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">movedata_datesj5</span><span class="op">)</span> <span class="co"># Inspect jittered dates</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph    departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 95/216/1100   19/818/9098 2019-02-07           97             <span style="text-decoration: underline;">304</span>781</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 69/196/5890   71/939/3228 2019-08-12          167             <span style="text-decoration: underline;">229</span>759</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 52/577/5349   82/501/8178 2019-09-18          115              <span style="text-decoration: underline;">36</span>413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 39/103/5541   13/282/1763 2019-10-29          125             <span style="text-decoration: underline;">488</span>616</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 41/788/6464   57/418/6011 2019-10-17          109             <span style="text-decoration: underline;">581</span>785</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 69/393/9398   39/947/2201 2019-10-05           72             <span style="text-decoration: underline;">564</span>911</span></span>
<span></span>
<span><span class="co"># Add jitter of up to ±10 to movement weights:</span>:</span>
<span><span class="va">movedata_weightsj10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/jitter_weights.html">jitter_weights</a></span><span class="op">(</span><span class="va">example_movement_data</span>, range <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">movedata_weightsj10</span><span class="op">)</span> <span class="co"># Inspect jittered weights</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph    departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 95/216/1100   19/818/9098 2019-02-08        101.              <span style="text-decoration: underline;">304</span>781</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 69/196/5890   71/939/3228 2019-08-15        159.              <span style="text-decoration: underline;">229</span>759</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 52/577/5349   82/501/8178 2019-09-15        108.               <span style="text-decoration: underline;">36</span>413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 39/103/5541   13/282/1763 2019-10-26        131.              <span style="text-decoration: underline;">488</span>616</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 41/788/6464   57/418/6011 2019-10-17        103.              <span style="text-decoration: underline;">581</span>785</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 69/393/9398   39/947/2201 2019-10-06         79.5             <span style="text-decoration: underline;">564</span>911</span></span>
<span></span>
<span><span class="co"># Round movement dates down to the first day of the month, but do not aggregate:</span></span>
<span><span class="va">movedata_months</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/round_dates.html">round_dates</a></span><span class="op">(</span><span class="va">example_movement_data</span>, unit <span class="op">=</span> <span class="st">"month"</span>, sum_weight <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">movedata_months</span><span class="op">)</span> <span class="co"># Inspect rounded dates</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph    departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 95/216/1100   19/818/9098 2019-02-01           97             <span style="text-decoration: underline;">304</span>781</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 69/196/5890   71/939/3228 2019-08-01          167             <span style="text-decoration: underline;">229</span>759</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 52/577/5349   82/501/8178 2019-09-01          115              <span style="text-decoration: underline;">36</span>413</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 39/103/5541   13/282/1763 2019-10-01          125             <span style="text-decoration: underline;">488</span>616</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 41/788/6464   57/418/6011 2019-10-01          109             <span style="text-decoration: underline;">581</span>785</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 69/393/9398   39/947/2201 2019-10-01           72             <span style="text-decoration: underline;">564</span>911</span></span>
<span></span>
<span><span class="co"># Round movement dates down to the first day of the month, aggregate weights, and list reference numbers:</span></span>
<span><span class="va">movedata_months_aggr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/round_dates.html">round_dates</a></span><span class="op">(</span><span class="va">example_movement_data</span>, unit <span class="op">=</span> <span class="st">"month"</span>, sum_weight <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                    movement_reference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">movement_reference</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Inspect aggregated record for holdings which have 2 movements in the same month:</span></span>
<span><span class="va">movedata_months_aggr</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">movedata_months_aggr</span><span class="op">$</span><span class="va">movement_reference</span>, <span class="va">length</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span>,<span class="op">]</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph    departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 57/427/5455   21/771/7140 2019-09-01          156 <span style="color: #949494;">&lt;dbl [2]&gt;</span></span></span>
<span></span>
<span><span class="co"># Round movement reference numbers to the nearest multiple of 10:</span></span>
<span><span class="va">movedata_ref10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/round_weights.html">round_weights</a></span><span class="op">(</span><span class="va">example_movement_data</span>, unit <span class="op">=</span> <span class="fl">10</span>, column <span class="op">=</span> <span class="st">"movement_reference"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">movedata_ref10</span><span class="op">)</span> <span class="co"># Inspect rounded movement reference numbers</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 x 5</span></span></span>
<span><span class="co">#&gt;   departure_cph dest_cph    departure_date qty_pigs movement_reference</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 95/216/1100   19/818/9098 2019-02-08           97             <span style="text-decoration: underline;">304</span>780</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 69/196/5890   71/939/3228 2019-08-15          167             <span style="text-decoration: underline;">229</span>760</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 52/577/5349   82/501/8178 2019-09-15          115              <span style="text-decoration: underline;">36</span>410</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 39/103/5541   13/282/1763 2019-10-26          125             <span style="text-decoration: underline;">488</span>620</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 41/788/6464   57/418/6011 2019-10-17          109             <span style="text-decoration: underline;">581</span>780</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 69/393/9398   39/947/2201 2019-10-06           72             <span style="text-decoration: underline;">564</span>910</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="modifying-holding-coordinates">Modifying holding coordinates<a class="anchor" aria-label="anchor" href="#modifying-holding-coordinates"></a>
</h2>
<p>A function to resample holding coordinates in a density-dependent
manner is under development within the <a href="https://github.com/ku-awdc/hexscape/" class="external-link">hexscape package</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Carlijn Bogaardt, Matt Denwood, Stefan Widgren, Jessica Enright.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
