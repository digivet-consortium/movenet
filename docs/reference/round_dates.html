<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="round_dates() rounds movement dates in a movenet-format movement
tibble, down to the first day of the specified time unit. It optionally
summarises movement data with the same origin and destination by this time
unit. By default, this involves summation of weights, but alternative or
additional summary functions can be provided through ...."><title>Round down movement dates, and/or summarise data by time unit — round_dates • movenet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Round down movement dates, and/or summarise data by time unit — round_dates"><meta property="og:description" content="round_dates() rounds movement dates in a movenet-format movement
tibble, down to the first day of the specified time unit. It optionally
summarises movement data with the same origin and destination by this time
unit. By default, this involves summation of weights, but alternative or
additional summary functions can be provided through ...."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">movenet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0-1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/movenet.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pseudonymise.html">Pseudonymising livestock movement and holding data</a>
    <a class="dropdown-item" href="../articles/network-analysis.html">Network analysis of livestock movement data</a>
    <a class="dropdown-item" href="../articles/transmission-models.html">Integrating livestock movement data into transmission models</a>
    <a class="dropdown-item" href="../articles/configurations.html">Configurations</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Round down movement dates, and/or summarise data by time unit</h1>
      
      <div class="d-none name"><code>round_dates.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>round_dates()</code> rounds movement dates in a movenet-format movement
tibble, down to the first day of the specified time unit. It optionally
summarises movement data with the same origin and destination by this time
unit. By default, this involves summation of weights, but alternative or
additional summary functions can be provided through <code>...</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">round_dates</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">unit</span>,</span>
<span>  week_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"lubridate.week.start"</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>  sum_weight <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A movenet-format movement tibble.</p></dd>


<dt>unit</dt>
<dd><p>A character string specifying a time unit or a multiple of a
unit for movement dates to be rounded down to. Valid base units are <code>day</code>,
<code>week</code>, <code>month</code>, <code>bimonth</code>, <code>quarter</code>, <code>season</code>, <code>halfyear</code> and <code>year</code>.
Arbitrary unique English abbreviations as in the <code><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">lubridate::period()</a></code>
constructor are allowed. Rounding to multiples of units (except weeks) is
supported.</p></dd>


<dt>week_start</dt>
<dd><p>Week start day, only relevant for rounding down dates and/
or aggregating data by week. Default is the value of the
<code>lubridate.week.start</code> option, or 7 (Sunday) if this option is not set.
Full or abbreviated names of the days of the week can be in English or as
provided by the current locale.</p></dd>


<dt>sum_weight</dt>
<dd><p>If this is <code>TRUE</code> (the default), weights are summed over
<code>unit</code>, for all rows with the same origin and destination. The name of
the weight column will remain the same.</p></dd>


<dt>...</dt>
<dd><p>Additional or
alternative summary function(s), of the form name = value, to pass on to
<code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarise()</a></code>. Any summary functions will be applied to <code>data</code>,
grouped by origin, destination, and rounded-down date. The specified name
will be the column name in the resulting tibble.
The value can be:</p><ul><li><p>A vector of length 1, e.g. <code>min(x)</code>, <code>n()</code>, or <code>sum(is.na(y))</code>.</p></li>
<li><p>A vector of length n, e.g. <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile()</a></code>.</p></li>
<li><p>A tibble, to add multiple columns from a single expression.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A movement tibble like <code>data</code>, but with rounded-down movement dates.</p>


<p>If <code>sum_weight</code> is <code>TRUE</code> or any summary functions are provided through
<code>...</code>, the returned tibble contains data summarised by origin,
destination, and <code>unit</code>, and may thus have a decreased length compared to
<code>data</code>.</p>


<p>Columns for which a summary function is not provided, are dropped from
the resulting tibble.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Requires that an appropriate movement config file is loaded, to correctly
identify origin (<code>from</code>), destination (<code>to</code>), <code>date</code> and <code>weight</code> columns in
<code>data</code>.</p>
<p>Movement dates are rounded to the first day of the rounding unit specified in
<code>unit</code>.</p>
<p>If <code>sum_weight</code> is <code>TRUE</code>, weights are summed over all rows in <code>data</code> with
the same origin, destination, and rounded-down date. The summed weight column
is temporarily renamed, so that any additional weight-dependent summary
functions passed through <code>...</code> use the original weights rather than the sums.</p>
<p>If any summary functions are provided through <code>...</code>, the specified data are
summarised accordingly, over all rows in <code>data</code> with the same origin,
destination, and rounded-down date. Be careful when using' existing names:
the corresponding columns will be immediately updated with the new data and
this can affect subsequent operations referring to this name.</p>
<p>Columns for which a summary function is not provided, are dropped from
the resulting tibble.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">lubridate::floor_date()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">dplyr::summarise()</a></code> which this function
wraps.</p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Carlijn Bogaardt, Matt Denwood, Stefan Widgren.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

